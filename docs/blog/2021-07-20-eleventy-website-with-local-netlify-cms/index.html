<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Eleventy website with local netlify-cms</title><link rel="shortcut icon" type="image/png" href="/favicon.ico"><meta name="description" content="Create blogs locally and host them on Github pages using eleventy and netlify-cms"><link rel="canonical" href="/blog/2021-07-20-eleventy-website-with-local-netlify-cms/"><meta property="og:title" content="Eleventy website with local netlify-cms"><meta property="og:url" content="/blog/2021-07-20-eleventy-website-with-local-netlify-cms/"><meta property="og:description" content="Create blogs locally and host them on Github pages using eleventy and netlify-cms"><meta property="og:image" content="/assets/blog/11ty.png"><meta property="og:type" content="article"><meta name="google-site-verification" content="pa8BhZqjTZGFI4IlWaIvkcGCfDBEOCTszDd1Iir3tyM"><link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet"><link rel="stylesheet" href="/style.css"><script defer="defer" src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script></head><body><header class="page-header"><div class="container"><div class="page-header__content"><div class="nav-list"><a href="/">PRATIKKUTE</a></div><nav><ul role="list" class="nav-list flex-group"><li><a href="/">Home</a></li><li><a href="/blog/">Blog</a></li></ul></nav></div></div></header><main><article class="main-article"><div class="container container--narrow flow"><h1 class="article-title">Eleventy website with local netlify-cms</h1><figure class="main-article__figure"><img src="/assets/blog/11ty.png" alt="A simpler static site generator. An alternative to Jekyll. Written in JavaScript. Transforms a directory of templates (of varying types) into HTML."><figcaption>A simpler static site generator. An alternative to Jekyll. Written in JavaScript. Transforms a directory of templates (of varying types) into HTML.</figcaption></figure><h1>Eleventy static website</h1><p>Ref:</p><p><a href="https://www.11ty.dev/docs/">Eleventy Documentation</a></p><p><a href="https://www.npmjs.com/package/netlify-cms-proxy-server/">https://www.npmjs.com/package/netlify-cms-proxy-server/</a></p><p><a href="tps://www.netlifycms.org/docs/beta-features/">tps://www.netlifycms.org/docs/beta-features/</a></p><p><a href="https://www.youtube.com/watch?v=4wD00RT6d-g">kevin powell: Turn static HTML/CSS into a blog with CMS using the JAMStack</a></p><h2>Install eleventy</h2><pre class="language-js"><code class="language-js">npm install @<span class="token number">11</span>ty<span class="token operator">/</span>eleventy <span class="token operator">--</span>save<span class="token operator">-</span>dev</code></pre><h2>update package.json scripts and install devDependencies</h2><pre class="language-json"><code class="language-json"><br>  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"eleventy --serve"</span><span class="token punctuation">,</span><br>    <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"eleventy"</span><span class="token punctuation">,</span><br>    <span class="token property">"deploy"</span><span class="token operator">:</span> <span class="token string">"git subtree push --prefix public origin gh-pages"</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"@11ty/eleventy"</span><span class="token operator">:</span> <span class="token string">"^0.12.1"</span><span class="token punctuation">,</span><br>    <span class="token property">"@11ty/eleventy-plugin-syntaxhighlight"</span><span class="token operator">:</span> <span class="token string">"^3.1.1"</span><span class="token punctuation">,</span><br>    <span class="token property">"html-minifier"</span><span class="token operator">:</span> <span class="token string">"^4.0.0"</span><span class="token punctuation">,</span><br>    <span class="token property">"netlify-cms-proxy-server"</span><span class="token operator">:</span> <span class="token string">"^1.3.19"</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre><h2>Update .eleventy.js</h2><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> DateTime <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"luxon"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> syntaxHighlight <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"@11ty/eleventy-plugin-syntaxhighlight"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> htmlmin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"html-minifier"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><br><br>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">eleventyConfig</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br><br>  eleventyConfig<span class="token punctuation">.</span><span class="token function">addPlugin</span><span class="token punctuation">(</span>syntaxHighlight<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  eleventyConfig<span class="token punctuation">.</span><span class="token function">addPassthroughCopy</span><span class="token punctuation">(</span><span class="token string">"./src/style.css"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  eleventyConfig<span class="token punctuation">.</span><span class="token function">addPassthroughCopy</span><span class="token punctuation">(</span><span class="token string">"./src/assets"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  eleventyConfig<span class="token punctuation">.</span><span class="token function">addPassthroughCopy</span><span class="token punctuation">(</span><span class="token string">"./src/admin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  eleventyConfig<span class="token punctuation">.</span><span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token string">"postDate"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">dateObj</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> DateTime<span class="token punctuation">.</span><span class="token function">fromJSDate</span><span class="token punctuation">(</span>dateObj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span>DateTime<span class="token punctuation">.</span><span class="token constant">DATE_MED</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><br>  <span class="token comment">// Minify HTML</span><br>  eleventyConfig<span class="token punctuation">.</span><span class="token function">addTransform</span><span class="token punctuation">(</span><span class="token string">"htmlmin"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">content<span class="token punctuation">,</span> outputPath</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// Eleventy 1.0+: use this.inputPath and this.outputPath instead</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>outputPath<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">".html"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token keyword">let</span> minified <span class="token operator">=</span> htmlmin<span class="token punctuation">.</span><span class="token function">minify</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> <span class="token punctuation">{</span><br>        useShortDoctype<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>        removeComments<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>        collapseWhitespace<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token keyword">return</span> minified<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">return</span> content<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">return</span> <span class="token punctuation">{</span><br>    dir<span class="token operator">:</span> <span class="token punctuation">{</span><br>      input<span class="token operator">:</span> <span class="token string">"src"</span><span class="token punctuation">,</span><br>      output<span class="token operator">:</span> <span class="token string">"public"</span><span class="token punctuation">,</span><br>    <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><h2>Netlify CMS settings</h2><p>Add admin folder to your src folder</p><p>add two files to admin folder config.yml and index.html</p><h3>config.yml</h3><pre class="language-yml"><code class="language-yml"><span class="token key atrule">backend</span><span class="token punctuation">:</span><br>  <span class="token key atrule">name</span><span class="token punctuation">:</span> proxy<br>  <span class="token key atrule">proxy_url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>8081/api/v1<br>  <span class="token key atrule">branch</span><span class="token punctuation">:</span> main<br><br><span class="token key atrule">local_backend</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><br><span class="token key atrule">media_folder</span><span class="token punctuation">:</span> <span class="token string">"public/assets/blog"</span><br><span class="token key atrule">public_folder</span><span class="token punctuation">:</span> <span class="token string">"/assets/blog"</span><br><span class="token key atrule">collections</span><span class="token punctuation">:</span><br>  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">"blog"</span><br>    <span class="token key atrule">label</span><span class="token punctuation">:</span> <span class="token string">"Blog"</span><br>    <span class="token key atrule">folder</span><span class="token punctuation">:</span> <span class="token string">"src/blog"</span><br>    <span class="token key atrule">create</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><br>    <span class="token key atrule">slug</span><span class="token punctuation">:</span> <span class="token string">"---"</span><br>    <span class="token key atrule">fields</span><span class="token punctuation">:</span><br>      <span class="token punctuation">-</span> <span class="token punctuation">{</span> <span class="token key atrule">label</span><span class="token punctuation">:</span> <span class="token string">"Title"</span><span class="token punctuation">,</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">"title"</span><span class="token punctuation">,</span> <span class="token key atrule">widget</span><span class="token punctuation">:</span> <span class="token string">"string"</span> <span class="token punctuation">}</span><br>      <span class="token punctuation">-</span> <span class="token punctuation">{</span> <span class="token key atrule">label</span><span class="token punctuation">:</span> <span class="token string">"Description"</span><span class="token punctuation">,</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">"description"</span><span class="token punctuation">,</span> <span class="token key atrule">widget</span><span class="token punctuation">:</span> <span class="token string">"string"</span> <span class="token punctuation">}</span><br>      <span class="token punctuation">-</span> <span class="token punctuation">{</span> <span class="token key atrule">label</span><span class="token punctuation">:</span> <span class="token string">"Author"</span><span class="token punctuation">,</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">"author"</span><span class="token punctuation">,</span> <span class="token key atrule">widget</span><span class="token punctuation">:</span> <span class="token string">"string"</span> <span class="token punctuation">,</span><span class="token key atrule">default</span><span class="token punctuation">:</span> <span class="token string">"Pratik Kute"</span><span class="token punctuation">}</span><br>      <span class="token punctuation">-</span> <span class="token punctuation">{</span> <span class="token key atrule">label</span><span class="token punctuation">:</span> <span class="token string">"Date"</span><span class="token punctuation">,</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">"date"</span><span class="token punctuation">,</span> <span class="token key atrule">widget</span><span class="token punctuation">:</span> <span class="token string">"datetime"</span> <span class="token punctuation">}</span><br>      <span class="token punctuation">-</span> <span class="token punctuation">{</span> <span class="token key atrule">label</span><span class="token punctuation">:</span> <span class="token string">"Tags"</span><span class="token punctuation">,</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">"tags"</span><span class="token punctuation">,</span> <span class="token key atrule">widget</span><span class="token punctuation">:</span> <span class="token string">"list"</span><span class="token punctuation">,</span> <span class="token key atrule">default</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"post"</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><br>      <span class="token punctuation">-</span> <span class="token punctuation">{</span> <span class="token key atrule">label</span><span class="token punctuation">:</span> <span class="token string">"Featured Image"</span><span class="token punctuation">,</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">"image"</span><span class="token punctuation">,</span> <span class="token key atrule">widget</span><span class="token punctuation">:</span> <span class="token string">"image"</span> <span class="token punctuation">}</span><br>      <span class="token punctuation">-</span> <span class="token punctuation">{</span> <span class="token key atrule">label</span><span class="token punctuation">:</span> <span class="token string">"Image caption"</span><span class="token punctuation">,</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">"imageAlt"</span><span class="token punctuation">,</span> <span class="token key atrule">widget</span><span class="token punctuation">:</span> <span class="token string">"string"</span> <span class="token punctuation">}</span><br>      <span class="token punctuation">-</span> <span class="token punctuation">{</span> <span class="token key atrule">label</span><span class="token punctuation">:</span> <span class="token string">"Body"</span><span class="token punctuation">,</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">"body"</span><span class="token punctuation">,</span> <span class="token key atrule">widget</span><span class="token punctuation">:</span> <span class="token string">"markdown"</span> <span class="token punctuation">}</span><br><br></code></pre><h3>index.html</h3><pre class="language-html"><code class="language-html"><br><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token name">doctype</span> <span class="token name">html</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Content Manager<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><br><br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><br>  <span class="token comment">&lt;!-- Include the script that builds the page and powers Netlify CMS --></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/netlify-cms@^2.10.147/dist/netlify-cms.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><br></code></pre></div></article></main><footer class="site-footer"><p>© 2021 Pratik Kute. All rights reserved.</p></footer><script>if (window.netlifyIdentity) {
    window.netlifyIdentity.on("init", user => {
      if (!user) {
        window.netlifyIdentity.on("login", () => {
          document.location.href = "/admin/";
        });
      }
    });
  }</script></body></html>